{"version":3,"file":"events.js","sourceRoot":"","sources":["../../src/js/events.ts"],"names":[],"mappings":";;AAAA,IAAM,mBAAmB,GAAwB,EAAE,CAAC;AAEpD,SAAgB,SAAS;IACvB,QAAQ,CAAC,gBAAgB,CACvB,aAAa,EACb,SAAS,aAAa;QACpB,OAAO,CAAC,IAAI;QACV,8DAA8D;QAC9D,SAAS,SAAS,CAAC,KAAU;YAC3B,mBAAmB,CAAC,MAAM,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,EAAxB,CAAwB,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,IAAK,OAAA,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAxB,CAAwB,CAAC,CAAC;QAC3G,CAAC,EACD,SAAS,SAAS,CAAC,KAAc;YAC/B,OAAO,CAAC,KAAK,CAAC,oCAAoC,EAAE,KAAK,CAAC,CAAC;QAC7D,CAAC,EACD,YAAY,EACZ,kBAAkB,EAClB,EAAE,CACH,CAAC;IACJ,CAAC,EACD,KAAK,CACN,CAAC;AACJ,CAAC;AAnBD,8BAmBC;AAED;IACE,8DAA8D;IAC9D,2BAAqB,KAAa,EAAW,QAA6B;QAArD,UAAK,GAAL,KAAK,CAAQ;QAAW,aAAQ,GAAR,QAAQ,CAAqB;QACxE,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,kCAAM,GAAN;QACE,IAAM,KAAK,GAAG,mBAAmB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAChD,IAAI,KAAK,IAAI,CAAC,EAAE;YACd,mBAAmB,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SACtC;IACH,CAAC;IACH,wBAAC;AAAD,CAAC,AAZD,IAYC;AAZY,8CAAiB","sourcesContent":["const EVENT_SUBSCRIPTIONS: EventSubscription[] = [];\n\nexport function bootstrap() {\n  document.addEventListener(\n    'deviceready',\n    function onDeviceReady() {\n      cordova.exec(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function onSuccess(event: any) {\n          EVENT_SUBSCRIPTIONS.filter((sub) => sub.event === event.name).forEach((sub) => sub.callback(event.data));\n        },\n        function onFailure(error: unknown) {\n          console.error('Failed to register event listener.', error);\n        },\n        'Notificare',\n        'registerListener',\n        []\n      );\n    },\n    false\n  );\n}\n\nexport class EventSubscription {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(readonly event: string, readonly callback: (data: any) => void) {\n    EVENT_SUBSCRIPTIONS.push(this);\n  }\n\n  remove(): void {\n    const index = EVENT_SUBSCRIPTIONS.indexOf(this);\n    if (index >= 0) {\n      EVENT_SUBSCRIPTIONS.splice(index, 1);\n    }\n  }\n}\n"]}